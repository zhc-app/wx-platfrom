<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>往年录取查询</title>
    <link rel="stylesheet" type="text/css" href="../../../../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../css/style.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../css/z.css" />
    <script type="text/javascript" src="../../../../../script/aui-tab.js"></script>
    <script type="text/javascript" src="../../../../../script/zhc-route.js"></script>
    <script type="text/javascript" src="../../../../../script/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../../../../../script/aui-toast.js"></script>
    <script type="text/javascript" src="../../../../../script/network.js"></script>
    <script src="../../../../../script/doT.js"></script>
    <script src="../../../../../script/demo.js"></script>
    <style>
        .wenzi {
            font-family: 'PingFang-SC';
            font-size: 0.65rem;
            text-align: center;
            color: #6666ff;
            background: #fff;
        }

        .aui-bar-btn-item.aui-active {
            background-color: #6666ff;
            color: #ffffff;
        }

        .aui-bar-btn-item {
            display: table-cell;
            position: relative;
            width: 1%;
            line-height: 1.6rem;
            text-align: center;
            vertical-align: middle;
            border-radius: 0;
            position: relative;
            border-width: 1px;
            border-style: solid;
            border-color: #6666ff;
            border-left-width: 0;
        }

        .aui-list .aui-list-item-label,
        .aui-list .aui-list-item-label-icon {
            color: #212121;
            width: 40%;
            min-width: 1.5rem;
            margin: 0;
            padding: 0;
            padding-right: 0.25rem;
            line-height: 2.2rem;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            max-width: 100%;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            -webkit-align-items: center;
            align-items: center;
        }

        .aui-list {
            border: none;
            background-size: 100% 1px;
            background-repeat: no-repeat;
            background-position: top;
            background-image: linear-gradient(0, #dddddd, #dddddd 0%, transparent 0%);
            border-top: 1px solid #e5e5e5;
        }

        .aui-list .aui-list-item {
            border: none;
            background-size: 100% 1px;
            background-repeat: no-repeat;
            background-position: bottom;
            background-image: linear-gradient(0, #dddddd, #dddddd 0%, transparent 0%);
            background-image: -webkit-linear-gradient(90deg, #dddddd, #dddddd 0%, transparent 0%);
            border-bottom: 1px solid #e5e5e5;
        }

        .aui-list .aui-list-item {
            list-style: none;
            margin: 0;
            padding: 0;
            margin-left: 1rem;
            color: #212121;
            border-bottom: 1px solid #dddddd;
            position: relative;
            min-height: 2.2rem;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            -webkit-box-pack: justify;
            -webkit-justify-content: space-between;
            justify-content: space-between;
        }

        input {
            display: inline-block!important;
            width: 30%!important;
        }

        .titleC {
            font-family: ' PingFang-SC';
            font-size: 0.8rem!important;
            text-align: left;
            color: #8e8eb2!important;
        }

        input::-webkit-input-placeholder,
        textarea::-webkit-input-placeholder {
            color: #cccccc;
            font-size: 14px;
            text-align: left;
        }

        select {
            font-family: 'PingFang-SC';
            font-size: 0.8rem!important;
            text-align: left!important;
            color: #222222!important;
        }

        .cx {
            width: 85.3%;
            margin: auto;
            border-radius: 4px;
            background-color: #6666ff;
            margin-top: 2.875rem;
            color: #fff;
            line-height: 7px;
        }

        .aui-btn-block.aui-btn-sm {
            font-size: 0.8rem;
            height: 2.1rem;
            line-height: 2.15rem;
        }
    </style>
</head>

<body>
    <div id="main" class="flex-con">
        <div class="aui-bar aui-bar-btn" style="width:92.8%;padding-top:1.1rem">
            <div class="aui-bar-btn-item aui-active wenzi">按位次查询</div>
            <div class="aui-bar-btn-item wenzi">按分数查询</div>
            <div class="aui-bar-btn-item wenzi">按专业查询</div>
            <div class="aui-bar-btn-item wenzi">按院校查询</div>
        </div>

        <div class="aui-content aui-margin-b-15" style="margin-top:2rem" id="wccx">
            <ul class="aui-list aui-form-list">
              <div id="pchnf">

                  <li class="aui-list-item">

                      <div class="aui-list-item-inner">
                          <div class="aui-list-item-label titleC">
                              报考年份：
                          </div>
                          <div class="aui-list-item-input" id="rank_year_d">
                            <script id="rank_year_s" type="text/x-dot-template">
                              <select id="nf" onchange="onRankYear(this.value)">
                               <option value="1" style="color: #b6b6b6" disabled selected>请选择</option>
                              {{for (var i = 0; i < it.length; i++) {}}
                                <option>{{=it[i]}}</option>
                              {{}}}
                              </select>
                            </script>
                          </div>
                      </div>

                  </li>

                  <li class="aui-list-item">
                      <div class="aui-list-item-inner">
                          <div class="aui-list-item-label titleC">
                              报考批次：
                          </div>
                          <div class="aui-list-item-input" id="rank_batch_d">
                            <script id="rank_batch_s" type="text/x-dot-template">
                              <select id="pc">
                                  <option value="1" style="color: #b6b6b6" disabled selected>请选择</option>
                                  {{for (var i = 0; i < it.pici.length; i++) {}}
                                    <option>{{=it.pici[i].name}}</option>
                                  {{}}}

                              </select>
                            </script>
                          </div>
                      </div>
                  </li>

              </div>

                <li class="aui-list-item">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-label titleC" style="width: 14.5rem;">
                            请输入省排名范围：
                        </div>
                        <div class="aui-list-item-input">
                            <input type="number" pattern="[0-9]*" name="" value="" id="xiaofen" placeholder="请输入">
                            <span>-</span>
                            <input type="number" pattern="[0-9]*" name="" value="" id="dafen"   placeholder="请输入">
                        </div>
                    </div>
                </li>
            </ul>
            <div class="aui-content-padded">
                <div class="aui-btn aui-btn-block aui-btn-sm cx" tapmode onclick="chaxun(1)">查询</div>
            </div>
        </div>


        <div class="aui-content aui-margin-b-15" style="margin-top:2rem;display:none" id="fscx">
            <ul class="aui-list aui-form-list">
              <div id="afscx">

                        <li class="aui-list-item">
                            <div class="aui-list-item-inner">
                                <div class="aui-list-item-label titleC">
                                    报考年份：
                                </div>
                                <div class="aui-list-item-input" id="score_year_d">
                                    <script id="score_year_s" type="text/x-dot-template">
                                      <select id="fscxnf" onchange="onScoreYear(this.value)">
                                          <option value="1" style="color: #b6b6b6" disabled selected>请选择</option>
                                          {{for (var i = 0; i < it.length; i++) {}}
                                            <option>{{=it[i]}}</option>
                                          {{}}}
                                      </select>
                                    </script>
                                </div>
                            </div>
                        </li>
                        <li class="aui-list-item">
                            <div class="aui-list-item-inner">
                                <div class="aui-list-item-label titleC">
                                    报考批次：
                                </div>
                                <div class="aui-list-item-input" id="score_batch_d">
                                  <script id="score_batch_s" type="text/x-dot-template">
                                    <select id="fscxpc">
                                          <option value="1" style="color: #b6b6b6" disabled selected>请选择</option>
                                          {{for (var i = 0; i < it.pici.length; i++) {}}
                                            <option>{{=it.pici[i].name}}</option>
                                          {{}}}
                                    </select>
                                  </script>
                                </div>
                            </div>
                        </li>

              </div>

                <li class="aui-list-item">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-label titleC" style="width: 17.5rem;">
                            请输入高考分数范围：
                        </div>
                        <div class="aui-list-item-input">
                            <input type="number" pattern="[0-9]*" name="" value="" id="fscxxf" placeholder="请输入">
                            <span>-</span>
                            <input type="number" pattern="[0-9]*" name="" value="" id="fscxdf" placeholder="请输入">
                        </div>
                    </div>
                </li>
            </ul>
            <div class="aui-content-padded">
                <div class="aui-btn aui-btn-block aui-btn-sm cx" tapmode onclick="chaxun(2)">查询</div>
            </div>
        </div>


        <div class="aui-content aui-margin-b-15" style="margin-top:2rem;display:none" id="zycx">
            <ul class="aui-list aui-form-list" id="zhuanyechaxun">

                <li class="aui-list-item">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-label titleC">
                            报考年份：
                        </div>
                        <div class="aui-list-item-input" id="major_year_d">
                          <script id="major_year_s" type="text/x-dot-template">
                            <select id="zynf" onchange="onMajorYear(this.value)">
                              <option value="1" style="color: #b6b6b6" disabled selected>请选择</option>
                              {{for (var i = 0; i < it.length; i++) {}}
                                <option>{{=it[i]}}</option>
                              {{}}}
                            </select>
                          </script>
                        </div>
                    </div>
                </li>
                <li class="aui-list-item">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-label titleC">
                            报考批次：
                        </div>
                        <div class="aui-list-item-input" id="major_batch_d">
                          <script id="major_batch_s" type="text/x-dot-template">
                            <select id="zypc">
                              <option value="1" style="color: #b6b6b6" disabled selected>请选择</option>
                              {{for (var i = 0; i < it.pici.length; i++) {}}
                                <option>{{=it.pici[i].name}}</option>
                              {{}}}
                            </select>
                          </script>
                        </div>
                    </div>
                </li>
                <li class="aui-list-item">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-label titleC" style="width: 11.5rem;">
                            请输入专业名称：
                        </div>
                        <div class="aui-list-item-input">
                            <input  type="text" name="" id="zy" value="" style="width:100%!important" placeholder="请输入专业">
                        </div>
                    </div>
                </li>

            </ul>
            <div class="aui-content-padded">
                <div class="aui-btn aui-btn-block aui-btn-sm cx" tapmode onclick="chaxun(3)">查询</div>
            </div>
        </div>


        <div class="aui-content aui-margin-b-15" style="margin-top:2rem;display:none" id="xxcx">
            <ul class="aui-list aui-form-list" id="daxuechaxun">

                <li class="aui-list-item">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-label titleC">
                            报考年份：
                        </div>
                        <div class="aui-list-item-input" id="univ_year_d">
                          <script id="univ_year_s" type="text/x-dot-template">
                            <select id="dxnf" onchange="onUnivYear(this.value)">
                              <option value="1" style="color: #b6b6b6" disabled selected>请选择</option>
                              {{for (var i = 0; i < it.length; i++) {}}
                                <option>{{=it[i]}}</option>
                              {{}}}
                            </select>
                          </script>
                        </div>
                    </div>
                </li>
                <li class="aui-list-item">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-label titleC">
                            报考批次：
                        </div>
                        <div class="aui-list-item-input" id="univ_batch_d">
                          <script id="univ_batch_s" type="text/x-dot-template">
                            <select id="dxpc">
                              <option value="1" style="color: #b6b6b6" disabled selected>请选择</option>
                              {{for (var i = 0; i < it.pici.length; i++) {}}
                                <option>{{=it.pici[i].name}}</option>
                              {{}}}
                            </select>
                          </script>
                        </div>
                    </div>
                </li>
                <li class="aui-list-item">
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-label titleC" style="width: 11.5rem;">
                            请输入院校名称：
                        </div>
                        <div class="aui-list-item-input">
                            <input type="text" name="" value="" id="dx" style="width:100%!important" placeholder="请输入大学名称">
                        </div>
                    </div>
                </li>

            </ul>
            <div class="aui-content-padded">
                <div class="aui-btn aui-btn-block aui-btn-sm cx" tapmode onclick="chaxun(4)">查询</div>
            </div>
        </div>


    </div>
</body>
<script type="text/javascript" src="../../../../../script/api.js"></script>
<script type="text/javascript" src="../../../../../script/network.js"></script>
<script type="text/javascript">
var yearList = [];
var rank_year_dot = doT.template(document.getElementById('rank_year_s').innerHTML);
var rank_batch_dot = doT.template(document.getElementById('rank_batch_s').innerHTML);

var score_year_dot = doT.template(document.getElementById('score_year_s').innerHTML);
var score_batch_dot = doT.template(document.getElementById('score_batch_s').innerHTML);

var major_year_dot = doT.template(document.getElementById('major_year_s').innerHTML);
var major_batch_dot = doT.template(document.getElementById('major_batch_s').innerHTML);

var univ_year_dot = doT.template(document.getElementById('univ_year_s').innerHTML);
var univ_batch_dot = doT.template(document.getElementById('univ_batch_s').innerHTML);
var toast = new auiToast();

    window.onload = function() {
      getYearList();
    };

    var bar = document.querySelectorAll(".aui-bar-btn");
    if (bar) {
        for (var i = 0; i < bar.length; i++) {
            var d = bar[i];
            var tab = new auiTab({
                element: bar[i],
                repeatClick: true
            }, function(ret) {
                if (ret.index == 1) {
                    $api.byId('wccx').style.display = 'block';
                    $api.byId('fscx').style.display = 'none';
                    $api.byId('zycx').style.display = 'none';
                    $api.byId('xxcx').style.display = 'none';
                    document.getElementById('rank_year_d').innerHTML = rank_year_dot(yearList);
                } else if (ret.index == 2) {
                    $api.byId('wccx').style.display = 'none';
                    $api.byId('fscx').style.display = 'block';
                    $api.byId('zycx').style.display = 'none';
                    $api.byId('xxcx').style.display = 'none';
                    document.getElementById('score_year_d').innerHTML = score_year_dot(yearList);
                } else if (ret.index == 3) {
                    $api.byId('wccx').style.display = 'none';
                    $api.byId('fscx').style.display = 'none';
                    $api.byId('zycx').style.display = 'block';
                    $api.byId('xxcx').style.display = 'none';
                    document.getElementById('major_year_d').innerHTML = major_year_dot(yearList);
                } else {
                    $api.byId('wccx').style.display = 'none';
                    $api.byId('fscx').style.display = 'none';
                    $api.byId('zycx').style.display = 'none';
                    $api.byId('xxcx').style.display = 'block';
                    document.getElementById('univ_year_d').innerHTML = univ_year_dot(yearList);
                }

            });

        }
    }

    /*
        获取年份信息
    */
    function getYearList() {
      var parames = {}
      parames.studentid = $api.getStorage('studentid');
      parames.ctype = $api.getStorage('type');
      parames.year = 2016
      zhc.post('http://www.yxke12.com/index.php/App/Zhiyuantianbao/wangnianluquyap.html',
          parames,function(data) {
            yearList = data.date;
            document.getElementById('rank_year_d').innerHTML = rank_year_dot(yearList);
          },null, true);
    }

    function getYearByIndex(_index) {
        if (_index == 1) {
            return ($api.byId('nf') == null || $api.byId('nf').value == 1) ? 2016 : $api.byId('nf').value;
        }else if (_index == 2) {
            return ($api.byId('fscxnf') == null || $api.byId('fscxnf').value == 1) ? 2016 : $api.byId('fscxnf').value;
        }else if (_index == 3) {
            return ($api.byId('zynf') == null || $api.byId('zynf').value == 1) ? 2016 : $api.byId('zynf').value;
        }else if (_index == 4) {
            return ($api.byId('dxnf') == null || $api.byId('dxnf').value == 1) ? 2016 : $api.byId('dxnf').value;
        }
    }

    function nianfenpici(index) {
      var parames = {}
      parames.studentid = $api.getStorage('studentid');
      parames.ctype = $api.getStorage('type');
      parames.year = getYearByIndex(index);
      zhc.post('http://www.yxke12.com/index.php/App/Zhiyuantianbao/wangnianluquyap.html',
          parames,function(data) {
            if (index == 1) {
              document.getElementById('rank_batch_d').innerHTML = rank_batch_dot(data);
            }else if (index == 2) {
              document.getElementById('score_batch_d').innerHTML = score_batch_dot(data);
            }else if (index == 3) {
              document.getElementById('major_batch_d').innerHTML = major_batch_dot(data);
            }else if (index == 4) {
              document.getElementById('univ_batch_d').innerHTML = univ_batch_dot(data);
            }

          },null, true);
    }

    function chaxun(index) {
      if (index == 1 ) {
        var parames = {}
        if ($api.byId('nf').value == 1) {
          alert("请选择年份！")
          return;
        }
        else if ($api.byId('pc').value == 1) {
          alert("请选择批次！")
          return;
        }
        else if ($api.byId('xiaofen').value == "" || $api.byId('dafen').value == "") {
          alert("请正确填写分数范围！")
          return;
        }else {
          parames.type = $api.getStorage('type');
          parames.year = $api.byId('nf').value;
          parames.pici = $api.byId('pc').value;
          parames.maxInp = $api.byId('xiaofen').value;
          parames.minInp = $api.byId('dafen').value;
          parames.provinceid = $api.getStorage('provinceid');
          parames.studentid = $api.getStorage('studentid');
          zhc.post('http://www.yxke12.com/index.php/App/Zhiyuantianbao/wangnianluquweici.html',
              parames,function(data) {
                localStorage.data = $api.jsonToStr(data);
                if (data == null) {
                  toast.fail({
                      title: "未查询到相关位次",
                      duration: 2000,
                  });
                }else {
                    rt.openPage("./chaxunjieguo_frm.html", {title:"位次查询"})
                }
              },null, true);
        }
      }else if (index == 2) {
        var parames = {values:{}}
        if ($api.byId('fscxnf').value == 1) {
          alert("请选择年份！")
          return;
        }
        else if ($api.byId('fscxpc').value == 1) {
          alert("请选择批次！")
          return;
        }
        else if ($api.byId('fscxxf').value == "" || $api.byId('fscxdf').value == "") {
          alert("请正确填写分数范围！")
          return;
        }else {
          parames.type = $api.getStorage('type');
          parames.year = $api.byId('fscxnf').value;
          parames.pici = $api.byId('fscxpc').value;
          parames.maxInp = $api.byId('fscxxf').value;
          parames.minInp = $api.byId('fscxdf').value;
          parames.provinceid = $api.getStorage('provinceid');
          // parames.studentid = $api.getStorage('studentid');
          zhc.post('http://www.yxke12.com/index.php/App/Zhiyuantianbao/wangnianluqufenshu.html',
              parames,function(data) {
                localStorage.data = $api.jsonToStr(data);
                if (data == null) {
                  toast.fail({
                      title: "未查询到相关位次",
                      duration: 2000
                  });
                }else {
                    rt.openPage("./chaxunjieguo_frm.html", {title:"分数查询"})
                }
              },null, true);
        }
      }else if (index == 3) {
        var parames = {values:{}}
        if ($api.byId('zynf').value == 1) {
          alert("请选择年份！")
          return;
        }
        else if ($api.byId('zypc').value == 1) {
          alert("请选择批次！")
          return;
        }
        else if ($api.byId('zy').value == "" ) {
          alert("请填写专业！")
          return;
        }else {
          parames.type = $api.getStorage('type');
          parames.year = $api.byId('zynf').value;
          parames.pici = $api.byId('zypc').value;
          parames.majorname = $api.byId('zy').value;
          parames.provinceid = $api.getStorage('provinceid');
          // parames.studentid = $api.getStorage('studentid');
          zhc.post('http://www.yxke12.com/index.php/App/Zhiyuantianbao/wangnianluquzhuanye.html',
              parames,function(data) {
                localStorage.data = $api.jsonToStr(data);
                if (data == null) {
                  toast.fail({
                      title: "未查询到相关位次",
                      duration: 2000
                  });
                }else {
                    rt.openPage("./zhuanyechaxun_frm.html", {title:"专业查询"})
                }
              },null, true);
        }
      }
      else if (index == 4) {
        var parames = {values:{}}
        if ($api.byId('dxnf').value == 1) {
          alert("请选择年份！")
          return;
        }
        else if ($api.byId('dxpc').value == 1) {
          alert("请选择批次！")
          return;
        }
        else if ($api.byId('dx').value == "" ) {
          alert("请填写专业！")
          return;
        }else {
          parames.type = $api.getStorage('type');
          parames.year = $api.byId('dxnf').value;
          parames.pici = $api.byId('dxpc').value;
          parames.schoolname = $api.byId('dx').value;
          parames.provinceid = $api.getStorage('provinceid');
          // parames.studentid = $api.getStorage('studentid');
          zhc.post('http://www.yxke12.com/index.php/App/Zhiyuantianbao/wangnianluquyuanxiao.html',
              parames,function(data) {
                localStorage.data = $api.jsonToStr(data);
                if (data == null) {
                  toast.fail({
                      title: "未查询到相关位次",
                      duration: 2000,
                  });
                }else {
                    rt.openPage('./daxuechaxun_frm.html', {title:"大学查询"});
                }
              },null, true);
        }
      }
    }

    function onRankYear(value) {
        nianfenpici(1);
    }

    function onScoreYear(value) {
        nianfenpici(2);
    }

    function onMajorYear(value) {
        nianfenpici(3)
    }

    function onUnivYear(value) {
        nianfenpici(4);
    }

</script>

</html>
